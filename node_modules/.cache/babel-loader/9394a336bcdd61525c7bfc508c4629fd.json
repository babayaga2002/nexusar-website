{"ast":null,"code":"import _slicedToArray from\"/Users/sidharthchoudhary/nexusar-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Box}from'@mui/system';import{Avatar,IconButton}from'@mui/material';import CameraAltRoundedIcon from'@mui/icons-material/CameraAltRounded';import classes from'./AvatarImage.module.css';import{useEffect,useState}from'react';import{uploadFileToStorage}from'../../../services/firestore-queries';import IOSSpinner from'../ios-spinner/IOSSpinner';import SuccessSnackbar from'../../Dashboard/SuccessSnackbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AvatarImage=function AvatarImage(props){var src=props.src,alt=props.alt,folderName=props.folderName,setImageSrc=props.setImageSrc,collectionName=props.collectionName;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),uploading=_useState4[0],setUploading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),open=_useState6[0],setOpen=_useState6[1];var clickHandler=function clickHandler(){document.getElementsByClassName(classes.inputFile)[0].click();};var onImageChange=function onImageChange(event){var reader=new FileReader();var file=event.target.files[0];if(file){reader.onload=function(){if(reader.readyState===2)setImage(file);};reader.readAsDataURL(event.target.files[0]);}else setImage(null);};useEffect(function(){if(image&&folderName)uploadFileToStorage('profilePictureValue',image,'profile',folderName,setUploading,setImageSrc,collectionName,setOpen);},[image,folderName,setImageSrc,collectionName]);return/*#__PURE__*/_jsxs(Box,{pt:{sm:4},children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Avatar,{alt:alt,sx:{width:200,height:200,opacity:uploading?0.25:1},src:src}),uploading&&/*#__PURE__*/_jsx(Box,{sx:{position:'relative',top:-120},children:/*#__PURE__*/_jsx(IOSSpinner,{})})]}),!uploading&&/*#__PURE__*/_jsxs(IconButton,{style:{top:'-50px',right:'-20px',background:'white'},onClick:clickHandler,children:[/*#__PURE__*/_jsx(CameraAltRoundedIcon,{style:{fontSize:'24px'}}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:classes.inputFile,accept:\"image/*\",onChange:function onChange(e){onImageChange(e);}})]}),/*#__PURE__*/_jsx(SuccessSnackbar,{open:open,setOpen:setOpen,info:\"Image updated succesfully.\"})]});};export default AvatarImage;","map":{"version":3,"sources":["/Users/sidharthchoudhary/nexusar-website/src/components/ui/avatar-image/AvatarImage.js"],"names":["Box","Avatar","IconButton","CameraAltRoundedIcon","classes","useEffect","useState","uploadFileToStorage","IOSSpinner","SuccessSnackbar","AvatarImage","props","src","alt","folderName","setImageSrc","collectionName","image","setImage","uploading","setUploading","open","setOpen","clickHandler","document","getElementsByClassName","inputFile","click","onImageChange","event","reader","FileReader","file","target","files","onload","readyState","readAsDataURL","sm","width","height","opacity","position","top","right","background","fontSize","e"],"mappings":"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","sourcesContent":["import { Box } from '@mui/system';\nimport { Avatar, IconButton } from '@mui/material';\nimport CameraAltRoundedIcon from '@mui/icons-material/CameraAltRounded';\nimport classes from './AvatarImage.module.css';\nimport { useEffect, useState } from 'react';\nimport { uploadFileToStorage } from '../../../services/firestore-queries';\nimport IOSSpinner from '../ios-spinner/IOSSpinner';\nimport SuccessSnackbar from '../../Dashboard/SuccessSnackbar';\n\nconst AvatarImage = (props) => {\n  const { src, alt, folderName, setImageSrc, collectionName } = props;\n  const [image, setImage] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  const [open, setOpen] = useState(false);\n\n  const clickHandler = () => {\n    document.getElementsByClassName(classes.inputFile)[0].click();\n  };\n\n  const onImageChange = (event) => {\n    const reader = new FileReader();\n    const file = event.target.files[0];\n\n    if (file) {\n      reader.onload = () => {\n        if (reader.readyState === 2) setImage(file);\n      };\n      reader.readAsDataURL(event.target.files[0]);\n    } else setImage(null);\n  };\n\n  useEffect(() => {\n    if (image && folderName)\n      uploadFileToStorage(\n        'profilePictureValue',\n        image,\n        'profile',\n        folderName,\n        setUploading,\n        setImageSrc,\n        collectionName,\n        setOpen\n      );\n  }, [image, folderName, setImageSrc, collectionName]);\n\n  return (\n    <Box pt={{ sm: 4 }}>\n      <Box>\n        <Avatar alt={alt} sx={{ width: 200, height: 200, opacity: uploading ? 0.25 : 1 }} src={src} />\n        {uploading && (\n          <Box sx={{ position: 'relative', top: -120 }}>\n            <IOSSpinner />\n          </Box>\n        )}\n      </Box>\n      {!uploading && (\n        <IconButton style={{ top: '-50px', right: '-20px', background: 'white' }} onClick={clickHandler}>\n          <CameraAltRoundedIcon style={{ fontSize: '24px' }} />\n          <input\n            type=\"file\"\n            className={classes.inputFile}\n            accept=\"image/*\"\n            onChange={(e) => {\n              onImageChange(e);\n            }}\n          />\n        </IconButton>\n      )}\n      <SuccessSnackbar open={open} setOpen={setOpen} info=\"Image updated succesfully.\" />\n    </Box>\n  );\n};\n\nexport default AvatarImage;\n"]},"metadata":{},"sourceType":"module"}