{"ast":null,"code":"import _slicedToArray from\"/Users/sidharthchoudhary/nexusar-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Container,Divider}from'@mui/material';import{Box}from'@mui/system';import{Fragment,useEffect,useState}from'react';import{auth}from'../../services/firebase.js';import{useAuthState}from'react-firebase-hooks/auth';import{useHistory}from'react-router';import{Link}from'react-router-dom';import Loading from'../Loading.js';import signOut from'../../services/auth/sign-out.js';import DashboardContent from'../../components/Dashboard/DashboardContent/DashboardContent.js';import NotUser from'./NotUser.js';import{checkEmployeeExists}from'../../services/firestore-queries.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Dashboard=function Dashboard(){var history=useHistory();var _useAuthState=useAuthState(auth),_useAuthState2=_slicedToArray(_useAuthState,3),user=_useAuthState2[0],loading=_useAuthState2[1],error=_useAuthState2[2];var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),isEmployee=_useState2[0],setIsEmployee=_useState2[1];useEffect(function(){if(error)alert(error);if(loading)return/*#__PURE__*/_jsx(Loading,{});if(!user)history.replace('/login');if(user)checkEmployeeExists(user,setIsEmployee);},[user,loading,error,history]);return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Box,{sx:{height:50}}),/*#__PURE__*/_jsx(Container,{sx:{py:1},children:/*#__PURE__*/_jsx(\"h3\",{children:\"User Dashboard\"})}),/*#__PURE__*/_jsx(Divider,{light:true}),isEmployee===undefined&&/*#__PURE__*/_jsx(Loading,{}),isEmployee===false&&/*#__PURE__*/_jsx(NotUser,{userType:\"employee\"}),user&&isEmployee&&/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(Container,{sx:{display:'flex',justifyContent:'end',py:2},children:[/*#__PURE__*/_jsx(\"small\",{children:user.displayName}),/*#__PURE__*/_jsx(Divider,{orientation:\"vertical\",sx:{mx:2,height:20}}),/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(Link,{to:'#',style:{color:'#0071e3'},onClick:signOut,children:\"Logout\"})})]}),/*#__PURE__*/_jsx(DashboardContent,{user:user})]})]});};export default Dashboard;","map":{"version":3,"sources":["/Users/sidharthchoudhary/nexusar-website/src/pages/Login/Dashboard.js"],"names":["Container","Divider","Box","Fragment","useEffect","useState","auth","useAuthState","useHistory","Link","Loading","signOut","DashboardContent","NotUser","checkEmployeeExists","Dashboard","history","user","loading","error","undefined","isEmployee","setIsEmployee","alert","replace","height","py","display","justifyContent","displayName","mx","color"],"mappings":"+JAAA,OAASA,SAAT,CAAoBC,OAApB,KAAmC,eAAnC,CACA,OAASC,GAAT,KAAoB,aAApB,CACA,OAASC,QAAT,CAAmBC,SAAnB,CAA8BC,QAA9B,KAA8C,OAA9C,CACA,OAASC,IAAT,KAAqB,4BAArB,CACA,OAASC,YAAT,KAA6B,2BAA7B,CACA,OAASC,UAAT,KAA2B,cAA3B,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,OAAP,KAAoB,eAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,iCAApB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,iEAA7B,CACA,MAAOC,CAAAA,OAAP,KAAoB,cAApB,CACA,OAASC,mBAAT,KAAoC,qCAApC,C,wFAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB,GAAMC,CAAAA,OAAO,CAAGR,UAAU,EAA1B,CACA,kBAA+BD,YAAY,CAACD,IAAD,CAA3C,gDAAOW,IAAP,mBAAaC,OAAb,mBAAsBC,KAAtB,mBACA,cAAoCd,QAAQ,CAACe,SAAD,CAA5C,wCAAOC,UAAP,eAAmBC,aAAnB,eAEAlB,SAAS,CAAC,UAAM,CACd,GAAIe,KAAJ,CAAWI,KAAK,CAACJ,KAAD,CAAL,CACX,GAAID,OAAJ,CAAa,mBAAO,KAAC,OAAD,IAAP,CACb,GAAI,CAACD,IAAL,CAAWD,OAAO,CAACQ,OAAR,CAAgB,QAAhB,EAEX,GAAIP,IAAJ,CAAUH,mBAAmB,CAACG,IAAD,CAAOK,aAAP,CAAnB,CACX,CANQ,CAMN,CAACL,IAAD,CAAOC,OAAP,CAAgBC,KAAhB,CAAuBH,OAAvB,CANM,CAAT,CAQA,mBACE,MAAC,QAAD,yBACE,KAAC,GAAD,EAAK,EAAE,CAAE,CAAES,MAAM,CAAE,EAAV,CAAT,EADF,cAEE,KAAC,SAAD,EAAW,EAAE,CAAE,CAAEC,EAAE,CAAE,CAAN,CAAf,uBACE,sCADF,EAFF,cAKE,KAAC,OAAD,EAAS,KAAK,KAAd,EALF,CAOGL,UAAU,GAAKD,SAAf,eAA4B,KAAC,OAAD,IAP/B,CAQGC,UAAU,GAAK,KAAf,eAAwB,KAAC,OAAD,EAAS,QAAQ,CAAC,UAAlB,EAR3B,CAUGJ,IAAI,EAAII,UAAR,eACC,MAAC,QAAD,yBACE,MAAC,SAAD,EAAW,EAAE,CAAE,CAAEM,OAAO,CAAE,MAAX,CAAmBC,cAAc,CAAE,KAAnC,CAA0CF,EAAE,CAAE,CAA9C,CAAf,wBACE,uBAAQT,IAAI,CAACY,WAAb,EADF,cAEE,KAAC,OAAD,EAAS,WAAW,CAAC,UAArB,CAAgC,EAAE,CAAE,CAAEC,EAAE,CAAE,CAAN,CAASL,MAAM,CAAE,EAAjB,CAApC,EAFF,cAGE,oCACE,KAAC,IAAD,EAAM,EAAE,CAAE,GAAV,CAAe,KAAK,CAAE,CAAEM,KAAK,CAAE,SAAT,CAAtB,CAA4C,OAAO,CAAEpB,OAArD,oBADF,EAHF,GADF,cAWE,KAAC,gBAAD,EAAkB,IAAI,CAAEM,IAAxB,EAXF,GAXJ,GADF,CA4BD,CAzCD,CA2CA,cAAeF,CAAAA,SAAf","sourcesContent":["import { Container, Divider } from '@mui/material';\nimport { Box } from '@mui/system';\nimport { Fragment, useEffect, useState } from 'react';\nimport { auth } from '../../services/firebase.js';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useHistory } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport Loading from '../Loading.js';\nimport signOut from '../../services/auth/sign-out.js';\nimport DashboardContent from '../../components/Dashboard/DashboardContent/DashboardContent.js';\nimport NotUser from './NotUser.js';\nimport { checkEmployeeExists } from '../../services/firestore-queries.js';\n\nconst Dashboard = () => {\n  const history = useHistory();\n  const [user, loading, error] = useAuthState(auth);\n  const [isEmployee, setIsEmployee] = useState(undefined);\n\n  useEffect(() => {\n    if (error) alert(error);\n    if (loading) return <Loading />;\n    if (!user) history.replace('/login');\n\n    if (user) checkEmployeeExists(user, setIsEmployee);\n  }, [user, loading, error, history]);\n\n  return (\n    <Fragment>\n      <Box sx={{ height: 50 }} />\n      <Container sx={{ py: 1 }}>\n        <h3>User Dashboard</h3>\n      </Container>\n      <Divider light />\n\n      {isEmployee === undefined && <Loading />}\n      {isEmployee === false && <NotUser userType=\"employee\" />}\n\n      {user && isEmployee && (\n        <Fragment>\n          <Container sx={{ display: 'flex', justifyContent: 'end', py: 2 }}>\n            <small>{user.displayName}</small>\n            <Divider orientation=\"vertical\" sx={{ mx: 2, height: 20 }} />\n            <small>\n              <Link to={'#'} style={{ color: '#0071e3' }} onClick={signOut}>\n                Logout\n              </Link>\n            </small>\n          </Container>\n\n          <DashboardContent user={user} />\n        </Fragment>\n      )}\n    </Fragment>\n  );\n};\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}