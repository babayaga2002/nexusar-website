{"ast":null,"code":"import _slicedToArray from\"/Users/sidharthchoudhary/nexusar-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{Box}from'@mui/system';import{IconButton}from'@mui/material';import BackupRoundedIcon from'@mui/icons-material/BackupRounded';import IOSSpinner from'../ios-spinner/IOSSpinner';import classes from'./InputFile.module.css';import{uploadFileToStorage}from'../../../services/firestore-queries';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var InputFile=function InputFile(props){var label=props.label,placeholder=props.placeholder,folderName=props.folderName,value=props.value,setValue=props.setValue,field=props.field,collectionName=props.collectionName;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),uploading=_useState4[0],setUploading=_useState4[1];var clickHandler=function clickHandler(){document.getElementById(\"\".concat(id,\"_file\")).click();};var onFileChange=function onFileChange(event){var reader=new FileReader();var file=event.target.files[0];if(file){reader.onload=function(){if(reader.readyState===2)setFile(file);};reader.readAsDataURL(event.target.files[0]);}else setFile(null);};useEffect(function(){if(file)uploadFileToStorage(field,file,\"\".concat(field.toLowerCase()),folderName,setUploading,setValue,collectionName,function(){});},[file,field,folderName,setValue,collectionName]);var id=label.toLowerCase().split(' ').join('-');var url=value?value:'#';return/*#__PURE__*/_jsxs(Box,{pr:{sm:6},py:1,sx:{display:'grid'},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:id,children:label}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",mt:'10px',children:[/*#__PURE__*/_jsx(\"a\",{href:url,target:\"_blank\",rel:\"noreferrer\",style:{display:'contents'},children:/*#__PURE__*/_jsx(\"input\",{id:id,type:\"text\",className:classes.inputField,placeholder:placeholder,value:value?value:'',style:{textDecoration:value?'underline':'none'},readOnly:true})}),uploading&&/*#__PURE__*/_jsx(Box,{pl:2,children:/*#__PURE__*/_jsx(IOSSpinner,{})}),!uploading&&/*#__PURE__*/_jsxs(IconButton,{className:classes.iconButton,onClick:clickHandler,children:[/*#__PURE__*/_jsx(BackupRoundedIcon,{style:{fontSize:'32px'}}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"\".concat(id,\"_file\"),className:classes.inputFile,accept:\"application/pdf\",onChange:function onChange(e){onFileChange(e);}})]})]})]});};export default InputFile;","map":{"version":3,"sources":["/Users/sidharthchoudhary/nexusar-website/src/components/ui/input-file/InputFile.js"],"names":["useState","useEffect","Box","IconButton","BackupRoundedIcon","IOSSpinner","classes","uploadFileToStorage","InputFile","props","label","placeholder","folderName","value","setValue","field","collectionName","file","setFile","uploading","setUploading","clickHandler","document","getElementById","id","click","onFileChange","event","reader","FileReader","target","files","onload","readyState","readAsDataURL","toLowerCase","split","join","url","sm","display","inputField","textDecoration","iconButton","fontSize","inputFile","e"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport { Box } from '@mui/system';\nimport { IconButton } from '@mui/material';\nimport BackupRoundedIcon from '@mui/icons-material/BackupRounded';\nimport IOSSpinner from '../ios-spinner/IOSSpinner';\nimport classes from './InputFile.module.css';\nimport { uploadFileToStorage } from '../../../services/firestore-queries';\n\nconst InputFile = (props) => {\n  const { label, placeholder, folderName, value, setValue, field, collectionName } = props;\n\n  const [file, setFile] = useState(null);\n  const [uploading, setUploading] = useState(false);\n\n  const clickHandler = () => {\n    document.getElementById(`${id}_file`).click();\n  };\n\n  const onFileChange = (event) => {\n    const reader = new FileReader();\n    const file = event.target.files[0];\n\n    if (file) {\n      reader.onload = () => {\n        if (reader.readyState === 2) setFile(file);\n      };\n      reader.readAsDataURL(event.target.files[0]);\n    } else setFile(null);\n  };\n\n  useEffect(() => {\n    if (file)\n      uploadFileToStorage(\n        field,\n        file,\n        `${field.toLowerCase()}`,\n        folderName,\n        setUploading,\n        setValue,\n        collectionName,\n        () => {}\n      );\n  }, [file, field, folderName, setValue, collectionName]);\n\n  const id = label.toLowerCase().split(' ').join('-');\n  const url = value ? value : '#';\n\n  return (\n    <Box pr={{ sm: 6 }} py={1} sx={{ display: 'grid' }}>\n      <label htmlFor={id}>{label}</label>\n      <Box display=\"flex\" mt={'10px'}>\n        <a href={url} target=\"_blank\" rel=\"noreferrer\" style={{ display: 'contents' }}>\n          <input\n            id={id}\n            type=\"text\"\n            className={classes.inputField}\n            placeholder={placeholder}\n            value={value ? value : ''}\n            style={{ textDecoration: value ? 'underline' : 'none' }}\n            readOnly\n          />\n        </a>\n        {uploading && (\n          <Box pl={2}>\n            <IOSSpinner />\n          </Box>\n        )}\n        {!uploading && (\n          <IconButton className={classes.iconButton} onClick={clickHandler}>\n            <BackupRoundedIcon style={{ fontSize: '32px' }} />\n            <input\n              type=\"file\"\n              id={`${id}_file`}\n              className={classes.inputFile}\n              accept=\"application/pdf\"\n              onChange={(e) => {\n                onFileChange(e);\n              }}\n            />\n          </IconButton>\n        )}\n      </Box>\n    </Box>\n  );\n};\n\nexport default InputFile;\n"]},"metadata":{},"sourceType":"module"}